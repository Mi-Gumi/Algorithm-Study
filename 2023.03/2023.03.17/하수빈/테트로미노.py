import sys
input = sys.stdin.readline

# 모든 경우의 수
d = [
    [[-1, 0], [-2, 0], [-3, 0]],
    [[0, -1], [0, -2], [0, -3]],
    [[-1, 0], [0, -1], [-1, -1]],
    [[0, -1], [-1, -1], [-2, -1]],
    [[0, 1], [-1, 1], [-2, 1]],
    [[1, 0], [1, -1], [1, -2]],
    [[-1, 0], [-1, -1], [-1, -2]],
    [[-1, 0], [-2, 0], [-2, -1]],
    [[-1, 0], [-2, 0], [-2, 1]],
    [[0, -1], [0, -2], [1, -2]],
    [[0, -1], [0, -2], [-1, -2]],
    [[-1, 0], [-1, -1], [-2, -1]],
    [[-1, 0], [-1, 1], [-2, 1]],
    [[0, -1], [-1, -1], [-1, -2]],
    [[0, -1], [1, -1], [1, -2]],
    [[0, -1], [1, -1], [0, -2]],
    [[0, -1], [-1, -1], [0, -2]],
    [[-1, 0], [-1, -1], [-2, 0]],
    [[-1, 0], [-1, 1], [-2, 0]]
]

N, M = map(int, input().split())
board = [list(map(int,input().split())) for _ in range(N)]
ans = 0

# 시작점 설정
for i in range(N):
    for j in range(M):
        for l in d:
            # 현재위치 + 설정된 3위치 값 합산
            tmp = board[i][j]
            for di, dj in l:
                ni, nj = i + di, j + dj
                if 0 <= ni < N and 0 <= nj < M:
                    tmp += board[ni][nj]
            # ans 변경
            ans = max(ans, tmp)

print(ans)